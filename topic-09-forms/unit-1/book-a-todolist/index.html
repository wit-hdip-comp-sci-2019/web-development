<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../../index.html"> Todo List Case Study  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab-09a Todolist-1">
          Lab-09a Todolist-1
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
        <a class="item" data-tab="05">
          05
        </a>
      
        <a class="item" data-tab="Ex-1">
          Ex-1
        </a>
      
        <a class="item" data-tab="Ex-2">
          Ex-2
        </a>
      
        <a class="item" data-tab="Ex-3">
          Ex-3
        </a>
      
        <a class="item" data-tab="Ex-4">
          Ex-4
        </a>
      
        <a class="item" data-tab="Ex-5">
          Ex-5
        </a>
      
        <a class="item" data-tab="Solution">
          Solution
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-00-overview/unit-a-course-review/book-a/index.html">Lab-00 Editing HTML </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-01-introducing-html/unit/book-b/index.html">Lab-01 HTML Structure </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-02-introducing-css/unit-b/book/index.html">Lab-02 CSS Intro </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-03-box-model/unit-a/book-a/index.html">Lab-03a Layout </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-03-box-model/unit-b/book-b/index.html">Lab-03b Multicolumn </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-04-navigation/unit-a/book/index.html">Lab-04 Navigation </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-05-templating/unit-a/book-01-deployment/index.html">Lab-05a Harp & Surge </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-05-templating/unit-b/book-templates/index.html">Lab-05b Templates </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-06-css-frameworks/unit-a/book-nav-2/index.html">Lab-06a Nav Params </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-06-css-frameworks/unit-b/book-semantic-ui/index.html">Lab-06b Semantic-UI </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-07-starting-play/unit-1/book-b-setup-play/index.html">Lab-07a Play Setup </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-07-starting-play/unit-2/book-c-playlist-1/index.html">Lab-07b Playlist 1 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-08-introducing-mvc/unit-1/book-a-playlist-2/index.html">Lab-08a Playlist-2 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-08-introducing-mvc/unit-2/book-b-playlist-3/index.html">Lab-08b Playlist-3 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-09-forms/unit-1/book-a-todolist/index.html">Lab-09a Todolist-1 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-09-forms/unit-2/book-b-playlist-4/index.html">Lab-09b Playlist-4 </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab-09a Todolist-1">
            <h1>Objectives</h1>
<p>Develop a completely new application, using the techniques we have explored so far.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>Create New Application</h1>
<p>Each time we start a new application, we will &#39;clone&#39; a starter app like this:</p>
<h2>Create New Project</h2>
<p>Create a new play project using this command:</p>
<pre><code class="lang-bash">git clone https://github.com/wit-hdip-comp-sci-2019/play-template-1</code></pre>
<p>The shell should show something like this:</p>
<pre><code>Cloning into &#39;play-template-1&#39;...
remote: Counting objects: 66, done.
remote: Compressing objects: 100% (47/47), done.
remote: Total 66 (delta 9), reused 66 (delta 9), pack-reused 0
Unpacking objects: 100% (66/66), done.</code></pre>
<h2>Rename Project</h2>
<p>The default name of the project should be changed now. This will require the following procedure:</p>
<ul>
<li>Rename the folder <code>play-template-1</code>. Call the folder <code>todolist</code> instead.</li>
<li><p>Use Sublime Text to edit this file: <code>playlist/conf/application.conf</code>. The first three lines contains the following:</p>
<pre><code>  # This is the main configuration file for the application.
  # ~~
  application.name=play-template-1</code></pre>
</li>
<li><p>Change <code>play-template-1</code> above to <code>todolist</code>, and save the file:</p>
<pre><code>  # This is the main configuration file for the application.
  # ~~
  application.name=todolist</code></pre>
</li>
</ul>
<h2>Import into Idea</h2>
<p>Still in the shell, and in the project folder enter the following command:</p>
<pre><code>play idealize</code></pre>
<p>You should get this response:</p>
<pre><code>~        _            _
~  _ __ | | __ _ _  _| |
~ | &#39;_ \| |/ _&#39; | || |_|
~ |  __/|_|\____|\__ (_)
~ |_|            |__/
~
~ play! 1.5.2, https://www.playframework.com
~
~ OK, the application is ready for Intellij Idea
~ Use File, Open Project... to open &quot;todolist.ipr&quot;
~</code></pre>
<p>Launch Idea eclipse, and select <code>Open</code>. Select the todlist folder and presse <code>Open</code>. The project should open like this:</p>
<p><img src="img/01x.png" alt=""></p>
<p>Open a command prompt inside the <code>todolist</code> folder, and run the app:</p>
<pre><code>play run</code></pre>
<p>Verify that the skeleton app is available:</p>
<ul>
<li><a href="http://localhost:9000">http://localhost:9000</a></li>
</ul>
<p>Do not proceed to the next step until the above procedure has been completed without any errors.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Static Todo List</h1>
<p>Replace the contents of the Dashboard view with the following:</p>
<h2>app/views/dashboard.html</h2>
<pre><code>#{extends &#39;main.html&#39; /}
#{set title:&#39;Dashboard&#39; /}

#{menu id:&quot;dashboard&quot;/}

&lt;section class=&quot;ui raised segment&quot;&gt;
  &lt;header class=&quot;ui header&quot;&gt;
    Todo List
  &lt;/header&gt;
  &lt;div class=&quot;ui bulleted list&quot;&gt;
    &lt;div class=&quot;ui item&quot;&gt; Make tea&lt;/div&gt;
    &lt;div class=&quot;ui item&quot;&gt; Go for snooze&lt;/div&gt;
    &lt;div class=&quot;ui item&quot;&gt; Make more tea&lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;

&lt;form class=&quot;ui stacked segment form&quot; action=&quot;/dashboard/addtodo&quot; method=&quot;POST&quot;&gt;
  &lt;div class=&quot;field&quot;&gt;
    &lt;label&gt;Title&lt;/label&gt;
    &lt;input placeholder=&quot;Title&quot; type=&quot;text&quot; name=&quot;title&quot;&gt;
  &lt;/div&gt;
  &lt;button class=&quot;ui blue submit button&quot;&gt;Add Todo&lt;/button&gt;
&lt;/form&gt;</code></pre>
<p>Also, change the title in the menu:</p>
<h2>app/views/tags/menu.html</h2>
<pre><code>&lt;nav class=&quot;ui menu&quot;&gt;
  &lt;header class=&quot;ui header item&quot;&gt; &lt;a href=&quot;/&quot;&gt; Todo List &lt;/a&gt;&lt;/header&gt;
  &lt;div class=&quot;right menu&quot;&gt;
    &lt;a id=&quot;dashboard&quot; class=&quot;item&quot; href=&quot;/dashboard&quot;&gt; Dashboard  &lt;/a&gt;
    &lt;a id=&quot;about&quot; class=&quot;item&quot; href=&quot;/about&quot;&gt; About &lt;/a&gt;
  &lt;/div&gt;
&lt;/nav&gt;

&lt;script&gt;
  $(&quot;#${_id}&quot;).addClass(&quot;active item&quot;);
&lt;/script&gt;</code></pre>
<p>The Dashboard will look like this:</p>
<p><img src="img/01.png" alt=""></p>
<p>Notice that the dashboard has a form - with a single text entry - the user can interact with.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Todo Model</h1>
<p>In the models package, bring in the following class:</p>
<h2>app/models/Todo.java</h2>
<pre><code>package models;

import play.db.jpa.Model;

import javax.persistence.Entity;

@Entity
public class Todo extends Model
{
  public String title;

  public Todo(String title)
  {
    this.title = title;
  }
}</code></pre>
<p>This class models a simple todo item - containing a string.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Add Todo Route + Action</h1>
<p>Examine the dashboard form again - particularly the <code>action</code> attribute of the <code>&lt;form&gt;</code> element:</p>
<pre><code>...
&lt;form class=&quot;ui stacked segment form&quot; action=&quot;/dashboard/addtodo&quot; method=&quot;POST&quot;&gt;
...</code></pre>
<p>This is the route we need to support. i.e. we need an entry in our routes file to match this route with a controller method.</p>
<p>Here it is:</p>
<h2>conf/routes</h2>
<pre><code>...
POST    /dashboard/addtodo                      Dashboard.addTodo
...</code></pre>
<p>Add the above to the routes file just under the existing <code>/dashboard</code> route.</p>
<p>Now add a new method in Dashboard class to handle the route:</p>
<pre><code>  public static void addTodo(String title)
  {
    Todo todo = new Todo(title);
    todo.save();
    Logger.info(&quot;Adding Todo&quot; + title);
    redirect(&quot;/dashboard&quot;);
  }</code></pre>
<p>Run the application now - and verify that you can add a todo item. The UX will not display them yet however (we still have the static elements). </p>
<p>We can view them in the database however:</p>
<ul>
<li><a href="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x6c;&#x6f;&#x63;&#97;&#x6c;&#104;&#x6f;&#x73;&#x74;&#58;&#x39;&#48;&#48;&#48;&#47;&#x40;&#100;&#x62;">&#x6c;&#x6f;&#x63;&#97;&#x6c;&#104;&#x6f;&#x73;&#x74;&#58;&#x39;&#48;&#48;&#48;&#47;&#x40;&#100;&#x62;</a>

</li>
</ul>
<p>We should see something like this:</p>
<p><img src="img/02.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="05">
            <h1>Todo UX</h1>
<p>In order to display the Todos - we need to change the <code>Dashboard.index()</code> method such that it fetches all of them from the database, and sends them to the view:</p>
<h2>app/controllers/Dashboard.java</h2>
<pre><code>  public static void index()
  {
    Logger.info(&quot;Rendering Dashboard&quot;);
    List&lt;Todo&gt; todolist = Todo.findAll();
    render(&quot;dashboard.html&quot;, todolist);
  }</code></pre>
<p>Now we can start to display them in the dashboard view. Replace just the todolist section with the following:</p>
<h2>app/views/dashboard.html</h2>
<pre><code>...
&lt;section class=&quot;ui raised segment&quot;&gt;
  &lt;header class=&quot;ui header&quot;&gt;
    Todo List
  &lt;/header&gt;
  &lt;div class=&quot;ui bulleted list&quot;&gt;
    #{list items:todolist, as:&#39;todo&#39;}
      &lt;div class=&quot;ui item&quot;&gt; ${todo.title} &lt;/div&gt;
    #{/list}
  &lt;/div&gt;
&lt;/section&gt;
...</code></pre>
<p>We have removed the static todo items, and we should now be rendering the todo items as submitted by the user (and stored in the database).</p>
<p><img src="img/03.png" alt=""></p>
<p>Try adding more todos - and verify that they appear in the list after you press <code>Add Todo</code>. Also, verify that you can see them in the database.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Ex-1">
            <h1>Exercise 1: Yaml + Bootatrap</h1>
<p>Using a new yaml file, which you create in the <code>conf</code> folder - seed the database with 3 todo items. The yaml file is usually called <code>data.yml</code>. Here is an example of a single todo item:</p>
<pre><code>Todo(t1):
  title: Make tea</code></pre>
<p>Remember, you will need to introduce the bootstrap class into the project:</p>
<pre><code>import java.util.List;

import play.*;
import play.jobs.*;
import play.test.*;

import models.*;

@OnApplicationStart
public class Bootstrap extends Job 
{ 
  public void doJob()
  {
    Fixtures.loadModels(&quot;data.yml&quot;);
  }
}</code></pre>
<p>This must be created in the app folder of the project</p>
<p><img src="img/02x.png" alt=""></p>
<p>This is covered in detail in Lab08a:</p>
<ul>
<li><a href="https://wit-hdip-comp-sci-2019.github.io/web-development/topic-08-introducing-mvc/unit-1/book-a-playlist-2/index.html#/03">Create Bootstrap class</a></li>
</ul>
<p>To see if this works as expected - stop the app (Ctrl+C in the console that started the app) - and re start it. This time it should display the todo items loaded from the yaml file.</p>
<p>Try adding a few more, but remember, this is loaded just once on application startup. So they will not appear until you restart the app again.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Ex-2">
            <h1>Exercise 2: Tables</h1>
<p>Change the todo view segment in the dashboard view:</p>
<h2>app/views/dashboard.html</h2>
<pre><code>...
&lt;section class=&quot;ui raised segment&quot;&gt;
  &lt;header class=&quot;ui header&quot;&gt;
    Todo List
  &lt;/header&gt;
  &lt;div class=&quot;ui bulleted list&quot;&gt;
  #{list items:todolist, as:&#39;todo&#39;}
    &lt;div class=&quot;ui item&quot;&gt; ${todo.title} &lt;/div&gt;
  #{/list}
  &lt;/div&gt;
&lt;/section&gt;
...</code></pre>
<p>Have them display the todo items in a 2 column table instead of a list. Here is an example of a 2 column table to get you started.  </p>
<pre><code>&lt;table class=&quot;ui fixed table&quot;&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;title 1&lt;/th&gt;
      &lt;th&gt;title 2&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt; col 1&lt;/td&gt;
      &lt;td&gt; col 2 &lt;/td&gt;
    &lt;/tr&gt; 
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
<p>The dashboard should look like this:</p>
<p><img src="img/04.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Ex-3">
            <h1>Exercise 3: Delete button</h1>
<p>Include a &#39;delete&#39; button into the second column of the todo table to look like this:</p>
<p><img src="img/05.png" alt=""></p>
<p>Examples of various style of buttons here:</p>
<ul>
<li><a href="https://semantic-ui.com/elements/button.html">https://semantic-ui.com/elements/button.html</a></li>
</ul>
<p>Leave the <code>href</code> for the button as <code>#</code> for the moment.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Ex-4">
            <h1>Exercise 4: Delete Implementation</h1>
<p>Introduce the following route into the application:</p>
<h2>conf/routes.html</h2>
<pre><code>GET     /dashboard/deletetodo/{id}              Dashboard.deleteTodo</code></pre>
<p>In the view, we can implement the <code>href</code> for the button:</p>
<pre><code>...
        &lt;td&gt; &lt;a href=&quot;/dashboard/deletetodo/${todo.id} &quot; class=&quot;ui tiny red button&quot;&gt; Delete &lt;/a&gt; &lt;/td&gt;
...</code></pre>
<p>This requires this method in the Dashboard controller</p>
<pre><code>  public static void deleteTodo(Long id)
  {
    // Implementation here...
    // ...
    redirect(&quot;/dashboard&quot;);
  }</code></pre>
<p>How would you go about deleting the todo item from the application model? Some hints below (it is not that hard!)</p>
<h3>Hints</h3>
<p>To find a todo in the database:</p>
<pre><code>    Todo todo = Todo.findById(id);</code></pre>
<p>To remove some object from the database:</p>
<pre><code>   obj.delete();</code></pre>

          </div>
        
          <div class="ui tab segment lab" data-tab="Ex-5">
            <h1>Exercise 5: Admin Feature</h1>
<p>Introduce a new route into the app:</p>
<ul>
<li><a href="http://localhost:9000/admin">http://localhost:9000/admin</a></li>
</ul>
<p>Which should display:</p>
<p><img src="img/06.png" alt=""></p>
<p>This will involve:</p>
<ul>
<li>a new route</li>
<li>a new controller called Admin</li>
<li>a method in that controller that fetches all todos and sends them to a new view</li>
<li>call this new view <code>admin.html</code></li>
</ul>
<h2>Hint</h2>
<p>Exercise 2 Solution in Lab08b implemented something similar:</p>
<ul>
<li><a href="https://wit-hdip-comp-sci-2019.github.io/web-development/topic-08-introducing-mvc/unit-2/book-b-playlist-3/index.html">Admin Exercise Solution from Lab08b</a></li>
</ul>

          </div>
        
          <div class="ui tab segment lab" data-tab="Solution">
            <h1>Exercises</h1>
<h2>Solution - including all exercises:</h2>
<ul>
<li><a href="https://github.com/wit-hdip-comp-sci-2019/todolist/releases/tag/todolist-1.exercises">https://github.com/wit-hdip-comp-sci-2019/todolist/releases/tag/todolist-1.exercises</a></li>
</ul>
<h2>Exercise 1: Open and Run Sample Solution</h2>
<p>First, download the zip of the project above and unzip. Then run:</p>
<pre><code>play idealize</code></pre>
<p>from inside the unzipped folder. In Idea, open the project in a &#39;New Window&#39; - so that you can compare the solution with your own version of todolist.</p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> Unless otherwise stated, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </div>

  </body>

</html>