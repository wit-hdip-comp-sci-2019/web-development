<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../../index.html"> Git  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab-12b Git Workflow">
          Lab-12b Git Workflow
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
        <a class="item" data-tab="05">
          05
        </a>
      
        <a class="item" data-tab="06">
          06
        </a>
      
        <a class="item" data-tab="07">
          07
        </a>
      
        <a class="item" data-tab="08">
          08
        </a>
      
        <a class="item" data-tab="Exercises">
          Exercises
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-00-overview/unit-a-course-review/book-a/index.html">Lab-00 Editing HTML </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-01-introducing-html/unit/book-b/index.html">Lab-01 HTML Structure </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-02-introducing-css/unit-b/book/index.html">Lab-02 CSS Intro </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-03-box-model/unit-a/book-a/index.html">Lab-03a Layout </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-03-box-model/unit-b/book-b/index.html">Lab-03b Multicolumn </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-04-navigation/unit-a/book/index.html">Lab-04 Navigation </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-05-templating/unit-a/book-01-deployment/index.html">Lab-05a Harp & Surge </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-05-templating/unit-b/book-templates/index.html">Lab-05b Templates </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-06-css-frameworks/unit-a/book-nav-2/index.html">Lab-06a Nav Params </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-06-css-frameworks/unit-b/book-semantic-ui/index.html">Lab-06b Semantic-UI </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-07-starting-play/unit-1/book-b-setup-play/index.html">Lab-07a Play Setup </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-07-starting-play/unit-2/book-c-playlist-1/index.html">Lab-07b Playlist 1 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-08-introducing-mvc/unit-1/book-a-playlist-2/index.html">Lab-08a Playlist-2 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-08-introducing-mvc/unit-2/book-b-playlist-3/index.html">Lab-08b Playlist-3 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-09-forms/unit-1/book-a-todolist/index.html">Lab-09a Todolist-1 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-09-forms/unit-2/book-b-playlist-4/index.html">Lab-09b Playlist-4 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-10-sessions/unit/book-sessions/index.html">Lab-10 Todolist-2 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-11-playlist-sessions/unit-0/book-1/index.html">Lab-11a Playlist Review </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-11-playlist-sessions/unit-1/book-2/index.html">Lab-11b Playlist 5 </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-12-deployment-review/unit-0/book-b-sourcetree/index.html">Lab-12a Git Setup </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-12-deployment-review/unit-0/book-c-git/index.html">Lab-12b Git Workflow </a>
          
        
      
        
          
            <a class="item"
               href="http://wit-hdip-comp-sci-2019.github.io/web-development//topic-12-deployment-review/unit-1/book-a-deploy/index.html">Lab-12c Deploy </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab-12b Git Workflow">
            <h1>Objectives</h1>
<p>Rebuild Todolist - this time committing to git version control as the app is composed using Sourcetree</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>todolist-versioned Project</h1>
<p>We should have our project in Sourcetree from the last lab:</p>
<p><img src="img/001.png" alt=""></p>
<p>We would like to use Intellj Idea - we can &#39;idealize&#39; then app:</p>
<pre><code>play idealize</code></pre>
<p>... and then import into Idea.</p>
<p>For this lab, keep both Idea &amp; Sourcetree open at the same time.</p>
<p>The first thing to notice is the Sourcetree view will have changed slightly: </p>
<p><img src="img/002.png" alt=""></p>
<p>This is because the idealize command as generated some new files in our project:</p>
<ul>
<li>todo-list-versioned.iml</li>
<li>todo-list-versioned.ipr</li>
<li>todo-list-versioned.iws</li>
</ul>
<p>These are configuration file for Idea. We dont need to be concerned with them, and we dont want them committed to our repository as they are not code really. We need to tell git to ignore them.</p>
<p>The built in mechanism for ignoring files in git is to plate the file names, or patterns, in a file called <code>.gitignore</code>. We already have one:</p>
<h2>.gitgnore</h2>
<pre><code class="lang-bash">.settings
eclipse
documentation
tmp
.classpath
.project</code></pre>
<p>Edit it now in Idea - and append paths to ignore the Idea files:</p>
<pre><code>...
*.iml
*.ipr
*.iws</code></pre>
<p>Save this file - and review the Sourcetree view again:</p>
<p><img src="img/003.png" alt=""></p>
<p>The change is subtle - git is no longer &#39;tracking&#39; the idea files, but notice that it reporting the one of the files we are tracking - .gitignore - is showing up as having a change.</p>
<p>This change is noted, but not &#39;staged&#39; or &#39;committed&#39; yet. We will do both now</p>
<p>To stage the changes, we just select all the &#39;Unstaged files&#39; check box - which reconfigures the view like this:</p>
<p><img src="img/004.png" alt=""></p>
<p>Enter the commit message &#39;ignore idea files&#39; as shown and press commit</p>
<p>Once committed, a small badge will appear over the &#39;Push&#39; button in the toolbar. This is because changes we have just made locally are not yet replicated on the github (remote) version:</p>
<p><img src="img/005.png" alt=""></p>
<p>Press push now - and the repositories will be &#39;synced&#39;</p>
<p><img src="img/006.png" alt=""></p>
<p>For each step in this lab we will be proceeding through this workflow:</p>
<ul>
<li>Make some changes to the project</li>
<li>Stage the changes</li>
<li>Commit the changes</li>
<li>Push them to the remote repository</li>
<li>Check to see if they have arrived (sometimes).</li>
</ul>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Model</h1>
<p>We can bring in a Todo model now:</p>
<h2>app/models/Todo.java</h2>
<pre><code>package models;

import play.db.jpa.Model;

import javax.persistence.Entity;

@Entity
public class Todo extends Model
{
  public String title;

  public Todo(String title)
  {
    this.title = title;
  }
}</code></pre>
<p>When you add a new class in Idea, you may get this prompt:</p>
<p><img src="img/007.png" alt=""></p>
<p>This is triggered because the project is a git repo now - and Idea can look after the stage/commit/push process we have just been through in Sourcetree. For this lab we will prefer to gain more experience using Sourcetree, so we will disable this feature and press &#39;cancel&#39;.</p>
<p>As soon as we saved the class in Idea, notice the changes have been detected in Sourcetree:</p>
<p><img src="img/008.png" alt=""></p>
<p>We can stage, commit and push whenever we like - usually we stage and commit when we have introduced a significant change. We would only push occasionally.</p>
<p>Lets stage and commit now with the message &#39;Todo model class introduced&#39;</p>
<p><img src="img/img/009.png" alt="">
<img src="img/img/010.png" alt=""></p>
<p>We might also push :</p>
<p><img src="img/011.png" alt=""></p>
<p><img src="img/012.png" alt=""></p>
<p>On the github version of the repo, locate the &#39;commits&#39; page, and verify that it is in sync with your local version:</p>
<p><img src="img/013.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Dashboard Controller + View</h1>
<p>Here is a new version of the Dashboard controller + view:</p>
<h2>app/controllers/Dashboard.java</h2>
<pre><code>package controllers;

import models.Todo;
import play.Logger;
import play.mvc.Controller;

import java.util.List;

public class Dashboard extends Controller
{
  public static void index()
  {
    Logger.info(&quot;Rendering Dashboard&quot;);
    List&lt;Todo&gt; todolist = Todo.findAll();
    render(&quot;dashboard.html&quot;, todolist);
  }

  public static void addTodo(String title)
  {
    Todo todo = new Todo(title);
    todo.save();
    Logger.info(&quot;Addint Todo&quot; + title);
    redirect(&quot;/dashboard&quot;);
  }
}</code></pre>
<h2>app/views/dashboard.html</h2>
<pre><code>#{extends &#39;main.html&#39; /}
#{set title:&#39;Dashboard&#39; /}

#{menu id:&quot;dashboard&quot;/}

&lt;section class=&quot;ui raised segment&quot;&gt;
  &lt;header class=&quot;ui header&quot;&gt;
    Todo List
  &lt;/header&gt;
  &lt;table class=&quot;ui fixed table&quot;&gt;
    &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Todo&lt;/th&gt;
      &lt;th&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    &lt;div class=&quot;ui bulleted list&quot;&gt;
    #{list items:todolist, as:&#39;todo&#39;}
    &lt;tr&gt;
      &lt;td&gt; ${todo.title} &lt;/td&gt;
    #{/list}
    &lt;/div&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;

&lt;/section&gt;

&lt;form class=&quot;ui stacked segment form&quot; action=&quot;/dashboard/addtodo&quot; method=&quot;POST&quot;&gt;
  &lt;div class=&quot;field&quot;&gt;
    &lt;label&gt;Title&lt;/label&gt;
    &lt;input placeholder=&quot;Title&quot; type=&quot;text&quot; name=&quot;title&quot;&gt;
  &lt;/div&gt;
  &lt;button class=&quot;ui blue submit button&quot;&gt;Add Todo&lt;/button&gt;
&lt;/form&gt;</code></pre>
<p>Run the app now - and verify that you can add todos.</p>
<p>Stage &amp; Commit these changes - note the message used below:</p>
<p><img src="img/014.png" alt="">
<img src="img/015.png" alt="">
<img src="img/016.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Delete Todo Support</h1>
<p>Now we can introduce delete support</p>
<h2>conf/routes</h2>
<pre><code>GET     /dashboard/deletetodo/{id}              Dashboard.deleteTodo</code></pre>
<h2>app/controlers/Dashboard.java</h2>
<pre><code>  public static void deleteTodo(Long id)
  {
    Todo todo = Todo.findById(id);
    todo.delete();
    Logger.info(&quot;Deleting &quot; + todo.title);
    redirect(&quot;/dashboard&quot;);
  }</code></pre>
<h2>app/views/dashboard.html</h2>
<p>Revised list to include delete button:</p>
<pre><code>...
      #{list items:todolist, as:&#39;todo&#39;}
      &lt;tr&gt;
        &lt;td&gt; ${todo.title} &lt;/td&gt;
        &lt;td&gt; &lt;a href=&quot;/dashboard/deletetodo/${todo.id} &quot; class=&quot;ui tiny red button&quot;&gt; Delete &lt;/a&gt; &lt;/td&gt;
      #{/list}
..</code></pre>
<p>Stage and commit the above - use the commit message:</p>
<pre><code class="lang-bash">introduced delete todo support</code></pre>
<p><img src="img/017.png" alt="">
<img src="img/018.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="05">
            <h1>UX Modifications</h1>
<p>The app is still branded as &#39;Template 1&#39; - we can change this now:</p>
<h2>app/views/tags/menu.html</h2>
<pre><code>...
  &lt;header class=&quot;ui header item&quot;&gt; &lt;a href=&quot;/&quot;&gt; Todolist V1 &lt;/a&gt;&lt;/header&gt;
...</code></pre>
<h2>app/views/about.html</h2>
<pre><code>...
  &lt;p&gt;
    A simple Todo List Application
  &lt;/p&gt;
...</code></pre>
<h2>app/views/start.html</h2>
<pre><code>...
  &lt;h1 class=&quot;ui header&quot;&gt;
    Welcome to Todolist V1
  &lt;/h1&gt;
  &lt;p&gt;
    Track your todos today!
  &lt;/p&gt;
...</code></pre>
<p>Stage and commit all of the above.</p>
<p>We also might like to <code>Tag</code> this version as being significant - perhaps call it &#39;V1&#39;. This will enable is to get back the this version later more easily.</p>
<p>To do this, first make sure you have &#39;pushed&#39; all updates to github. Then select the most recent change and right clock to select the context menu:</p>
<p><img src="img/019.png" alt=""></p>
<p>Select &#39;Tag&#39; and in the subsequent dialog:</p>
<p><img src="img/020.png" alt=""></p>
<p>.. Enter &#39;V1&#39;. Also, check the &#39;Push Tag&#39; check box in the dialog as shown above. Then press add.</p>
<p>A &#39;V1 tag&#39; should now be visible in the commit history:</p>
<p><img src="img/021.png" alt=""></p>
<p>If you visit the repo on github - then this version will be marked as a <code>Release</code> called V1:</p>
<p><img src="img/022.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="06">
            <h1>Member Model</h1>
<p>Introducing accounts we need a new model:</p>
<h2>app/models/Member.java</h2>
<pre><code>package models;

import play.db.jpa.Model;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.OneToMany;
import java.util.ArrayList;
import java.util.List;

@Entity
public class Member extends Model
{
  public String firstname;
  public String lastname;
  public String email;
  public String password;

  @OneToMany(cascade = CascadeType.ALL)
  public List&lt;Todo&gt; todolist = new ArrayList&lt;Todo&gt;();

  public Member(String firstname, String lastname, String email, String password)
  {
    this.firstname = firstname;
    this.lastname = lastname;
    this.email = email;
    this.password = password;
  }

  public static Member findByEmail(String email)
  {
    return find(&quot;email&quot;, email).first();
  }

  public boolean checkPassword(String password)
  {
    return this.password.equals(password);
  }
}</code></pre>
<p>We can also bring in a data file to preload the model:</p>
<h2>conf/data.yml</h2>
<pre><code>Todo(t1):
  title: Make tea

Todo(t2):
  title: Go for snooze

Todo(t3):
  title: Make more tea

Member(m1):
  firstname: homer
  lastname: simpson
  email: homer@simpson.com
  password: secret
  todolist:
  - t1
  - t2

Member(m2):
  firstname: marge
  lastname: simpson
  email: marge@simpson.com
  password: secret
  todolist:
  - t3</code></pre>
<p>We then need a new class to load this model:</p>
<h2>app/Bootstrap.java</h2>
<pre><code>import java.util.List;

import play.*;
import play.jobs.*;
import play.test.*;

import models.*;

@OnApplicationStart
public class Bootstrap extends Job
{
  public void doJob()
  {
    if (Member.count() == 0)
    {
      Fixtures.loadModels(&quot;data.yml&quot;);
    }
  }
}</code></pre>
<p>Stage and commit these changes now with a suitable message.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="07">
            <h1>Accounts Views</h1>
<p>We need a number of new views to support login/signup:</p>
<h2>app/views/tags/welcomemenu.html</h2>
<pre><code>&lt;nav class=&quot;ui menu&quot;&gt;
  &lt;header class=&quot;ui header item&quot;&gt; &lt;a href=&quot;#&quot;&gt; Todo List &lt;/a&gt;&lt;/header&gt;
  &lt;div class=&quot;right menu&quot;&gt;
    &lt;a id=&quot;signup&quot; class=&quot;item&quot; href=&quot;/signup&quot;&gt; Signup  &lt;/a&gt;
    &lt;a id=&quot;login&quot; class=&quot;item&quot; href=&quot;/login&quot;&gt;  Login   &lt;/a&gt;
  &lt;/div&gt;
&lt;/nav&gt;

&lt;script&gt;
  $(&quot;#${_id}&quot;).addClass(&quot;active item&quot;);
&lt;/script&gt;</code></pre>
<h2>app/views/login.html</h2>
<pre><code>#{extends &#39;main.html&#39; /}
#{set title:&#39;login&#39; /}
#{welcomemenu id:&quot;login&quot;/}

&lt;div class=&quot;ui two column middle aligned grid basic segment&quot;&gt;
  &lt;div class=&quot;column&quot;&gt;
    &lt;form class=&quot;ui stacked segment form&quot; action=&quot;/authenticate&quot; method=&quot;POST&quot;&gt;
      &lt;h3 class=&quot;ui header&quot;&gt;Log-in&lt;/h3&gt;
      &lt;div class=&quot;field&quot;&gt;
        &lt;label&gt;Email&lt;/label&gt; &lt;input placeholder=&quot;Email&quot; name=&quot;email&quot;&gt;
      &lt;/div&gt;
      &lt;div class=&quot;field&quot;&gt;
        &lt;label&gt;Password&lt;/label&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;
      &lt;/div&gt;
      &lt;button class=&quot;ui blue submit button&quot;&gt;Login&lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
  &lt;div class=&quot;column&quot;&gt;
    &lt;img class=&quot;ui image&quot; src=&quot;/public/images/todo-2.jpg&quot;&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<h2>app/views/signup.html</h2>
<pre><code>#{extends &#39;main.html&#39; /}
#{set title:&#39;Signup&#39; /}
#{welcomemenu id:&quot;signup&quot;/}

&lt;div class=&quot;ui two column grid basic middle aligned segment&quot;&gt;
  &lt;div class=&quot;column&quot;&gt;
    &lt;form class=&quot;ui stacked segment form&quot; action=&quot;/register&quot; method=&quot;POST&quot;&gt;
      &lt;h3 class=&quot;ui header&quot;&gt;Register&lt;/h3&gt;
      &lt;div class=&quot;two fields&quot;&gt;
        &lt;div class=&quot;field&quot;&gt;
          &lt;label&gt;First Name&lt;/label&gt;
          &lt;input placeholder=&quot;First Name&quot; type=&quot;text&quot; name=&quot;firstname&quot;&gt;
        &lt;/div&gt;
        &lt;div class=&quot;field&quot;&gt;
          &lt;label&gt;Last Name&lt;/label&gt;
          &lt;input placeholder=&quot;Last Name&quot; type=&quot;text&quot; name=&quot;lastname&quot;&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;field&quot;&gt;
        &lt;label&gt;Email&lt;/label&gt;
        &lt;input placeholder=&quot;Email&quot; type=&quot;text&quot; name=&quot;email&quot;&gt;
      &lt;/div&gt;
      &lt;div class=&quot;field&quot;&gt;
        &lt;label&gt;Password&lt;/label&gt;
        &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;
      &lt;/div&gt;
      &lt;button class=&quot;ui blue submit button&quot;&gt;Submit&lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
  &lt;div class=&quot;column&quot;&gt;
    &lt;img class=&quot;ui image&quot; src=&quot;/public/images/todo-1.png&quot;&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>In addition, the start view needs to be changed to include the welcomemenu instead of the main menu:</p>
<h2>app/views/start.html</h2>
<pre><code>...
#{welcomemenu id:&quot;start&quot;/}
...</code></pre>
<p>Finally, the dashboard view will need a different delete button:</p>
<h2>app/views/dashboard.html</h2>
<pre><code>...
      &lt;td&gt; &lt;a href=&quot;/dashboard/${member.id}/deletetodo/${todo.id} &quot; class=&quot;ui tiny red button&quot;&gt; Delete &lt;/a&gt; &lt;/td&gt;
...</code></pre>
<p>(This  replaces the existing delete button).</p>
<p>This app is not in a stable state now - so we will not commit it. In general, we only commit when we have specifics features (or fixes) completed. If the app is not currently working correctly, we hold off committing until the next feature is working (even if this feature is very minor).</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="08">
            <h1>Accounts Routes + Controllers</h1>
<p>To finish the upgrade to accounts - we need this revised routes file (replace the existing one):</p>
<h2>conf/routes</h2>
<pre><code># Routes
# This file defines all application routes (Higher priority routes first)
# ~

GET     /                                       Start.index

# Accounts
GET    /signup                                  Accounts.signup
GET    /login                                   Accounts.login
POST   /register                                Accounts.register
POST   /authenticate                            Accounts.authenticate
GET    /logout                                  Accounts.logout

# Home page
GET     /dashboard                              Dashboard.index
GET     /dashboard/{id}/deletetodo/{todoid}     Dashboard.deleteTodo
GET     /about                                  About.index

# Ignore favicon requests
GET     /favicon.ico                            404

# Map static resources from the /app/public folder to the /public path
GET     /public/                                staticDir:public

# Catch all
*       /{controller}/{action}                  {controller}.{action}</code></pre>
<p>This new controller:</p>
<h2>app/controllers/Accounts.java</h2>
<pre><code>package controllers;

import models.Member;
import play.Logger;
import play.mvc.Controller;

public class Accounts extends Controller
{
  public static void signup()
  {
    render(&quot;signup.html&quot;);
  }

  public static void login()
  {
    render(&quot;login.html&quot;);
  }

  public static void register(String firstname, String lastname, String email, String password)
  {
    Logger.info(&quot;Registering new user &quot; + email);
    Member member = new Member(firstname, lastname, email, password);
    member.save();
    redirect(&quot;/&quot;);
  }

  public static void authenticate(String email, String password)
  {
    Logger.info(&quot;Attempting to authenticate with &quot; + email + &quot;:&quot; + password);

    Member member = Member.findByEmail(email);
    if ((member != null) &amp;&amp; (member.checkPassword(password) == true)) {
      Logger.info(&quot;Authentication successful&quot;);
      session.put(&quot;logged_in_Memberid&quot;, member.id);
      redirect (&quot;/dashboard&quot;);
    } else {
      Logger.info(&quot;Authentication failed&quot;);
      redirect(&quot;/login&quot;);
    }
  }

  public static void logout()
  {
    session.clear();
    redirect (&quot;/&quot;);
  }

  public static Member getLoggedInMember()
  {
    Member member = null;
    if (session.contains(&quot;logged_in_Memberid&quot;)) {
      String memberId = session.get(&quot;logged_in_Memberid&quot;);
      member = Member.findById(Long.parseLong(memberId));
    } else {
      login();
    }
    return member;
  }
}</code></pre>
<p>This is a new version of Dashboard:</p>
<h2>app/controllers/Dashboard.java</h2>
<pre><code>package controllers;

import models.Member;
import models.Todo;
import play.Logger;
import play.mvc.Controller;

import java.util.List;

public class Dashboard extends Controller
{
  public static void index()
  {
    Logger.info(&quot;Rendering Dashboard&quot;);
    Member member = Accounts.getLoggedInMember();
    List&lt;Todo&gt; todolist = member.todolist;
    render(&quot;dashboard.html&quot;, member, todolist);
  }

  public static void addTodo(String title)
  {
    Member member = Accounts.getLoggedInMember();
    Todo todo = new Todo(title);
    member.todolist.add(todo);
    member.save();
    Logger.info(&quot;Adding Todo&quot; + title);
    redirect(&quot;/dashboard&quot;);
  }

  public static void deleteTodo(Long id, Long todoid)
  {
    Member member = Member.findById(id);
    Todo todo = Todo.findById(todoid);
    member.todolist.remove(todo);
    member.save();
    todo.delete();
    Logger.info(&quot;Deleting &quot; + todo.title);
    redirect(&quot;/dashboard&quot;);
  }
}</code></pre>
<p>See if the app runs now as expected, and that the todo items are kept separate by user. Also verify that we can delete  todos.</p>
<p>Stage and commit all changes in this step - and tag this version &#39;V2&#39;.</p>
<p><img src="img/023.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Exercises">
            <h1>Exercises</h1>
<p>Your repo should be structured something like this one now:</p>
<ul>
<li><a href="https://github.com/wit-hdip-comp-sci-2019/todolist-versioned">https://github.com/wit-hdip-comp-sci-2019/todolist-versioned</a></li>
</ul>
<h2>Exercise 1: Running an Earlier Version</h2>
<p>In Sourcetree, select the <code>V1</code> tagged commit, right click and select <code>Reset master to this commit</code> as shown here:</p>
<p><img src="img/024.png" alt=""></p>
<p>In the subsequent dialog, select &#39;Hard - diacard all working copy changes&#39;</p>
<p><img src="img/025.png" alt=""></p>
<p>You will get a warning - which you can accept:</p>
<p><img src="img/026.png" alt=""></p>
<p>The project folder will now contain the V1 project. </p>
<p><img src="img/029.png" alt=""></p>
<p>You can run this version now - and make sure it is that version (no member support)</p>
<p>Please note you cant really edit this version - or if you do it will involve creating a new branch from this point (something you will learn about later).</p>
<h2>Exercise 2: Get back to the latest version</h2>
<p>See if you can get back to V2 - it is more or less the same procedure as getting to V1, but in reverse.</p>
<h2>Exercise 3: : Logout &amp; Images</h2>
<p>The logout feature is missing from the menu. Also, the images assets are missing. Locate these form the Lab 10. Once you have the feature implemented, commit and push the modifications (with a suitable message).</p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> Unless otherwise stated, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </div>

  </body>

</html>